---
layout: post
title: "7월 17일 목요일 TIL(웹 구조, tomcat, servlet)"
date: 2025-07-17 00:00:00 +0900
categories: July_week3
---

# 7월 17일 목요일 TIL 작성

## 1. 학습 주제
- 웹의 작동 구조
- Tomcat
- servlet / servlet container
- JSP

## 2. 새롭게 알게된 점 / 핵심 개념 (가장 중요하다고 생각하는 개념)

### Tomcat과 Servlet, Servlet container, JSP
어제 배운 웹의 작동 구조를 확인해 보면, 웹 클라이언트에서 요청이 오면 웹 서버가 이를 받고 자신이 보낼 수 없거나, 동적으로 생성해야하는 HTML파일이라면 WAS에게 이를 요청하고 WAS는 DB의 정보를 참조하여 HTML을 생성한다. 이후 그 파일을 웹 서버에게 넘겨주면 웹 서버는 응답으로 웹 클라이언트에게 파일을 전달하여 화면에 보여주게 된다.

#### Tomcat
이제 Tomcat과 Servlet, Servlet container에 대해서 알아보면 Tomcat은 위의 웹 서비스 단계에서 웹 서버와 WAS(Web Application Server)가 합쳐진 기능을 하는 프로그램이다. 또한 Tomcat에서 WAS는 서블릿 컨테이너(Servlet Container)라고도 할 수 있다. 그럼 Servlet은 무엇일까? 


#### Servlet
이제까지 자바 파일을 코딩하고 실행시킬때, IDE에서 run을 하는 등 내가 원하는 타이밍에 코드를 실행시켰다. 하지만 웹의 경우 사용자의 요청이 있을 때, 웹 서버에 요청이 들어오면 WAS에서 파일을 실행시켜야 한다. 

그럼 웹 서버가 요청에 따라 파일을 실행시키려면 어떻게 해야할까? 웹 서버가 WAS에서 파일을 실행시키도록 하기 위해서 우리는 파일을 Servlet으로 만들 필요가 있는 것이다. 즉 **Servlet**은 기존의 자바 파일을 우리가 클릭해서 실행하는 것이 아닌 **웹 서버가 실행시키기 위한 형태로 자바 클래스에 기능을 추가한 것**, **자바 기반의 웹 컴포넌트**이다. 

따라서 기본 자바 클래스에서 아예 다른 개념으로 이어지는 것은 아니다. 이러한 것은 자바에서 클래스를 만드는 것 처럼 하고 `extend HttpServlet`을 하는 것으로 확인할 수 있다. 우리는 기본 자바 클래스에 상속을 시키는 것으로 서버에서 실행시킬 수 있는 형태로 스펙을 맞추는 것이다.

MVC 패턴으로 보면 이 서블릿은 요청을 제어하고 비즈니스 로직을 수행하는 "컨트롤러(Controller)"역할을 담당한다.


#### Servlet Container
다음으로 이렇게 **서버에서 실행할 수 있는 Servlet 파일들을 관리하는 것이 Servlet Container**라고 한다. 웹 서버에서 실행시키기 위해서는 Servlet 파일만 만드는 것이 아니라 만들어진 Servlet 파일을 Servlet 파일에 등록시켜야, url을 통해서 요청이 오면 어떤 파일을 실행시켜야 할지 Container에서 체크하고 파일을 자동으로 실행시킨다. 

Servlet Container에 등록시키는 방법은 다음과 같다.
1. 프로젝트의 webapp/WEB-INF/web.xml 파일에 직접 servlet 파일과 url을 등록하는 방법
2. `@WebServlet("사용할 url") 을 통해서 자동으로 WEB-INF의 web.xml에 등록하는 방법

또한 서블릿 컨테이는 **서블릿의 생명주기를 관리하는 역할** 또한 맡는다.

종합하여 서블릿 컨테이너의 기능을 정리하면 다음과 같다.

- 서블릿 로딩 및 언로딩 : 웹 어플리케이션 시작 시 서블릿을 메모리에 로딩하고, 종료시 메모리에서 내린다.(생명 주기 관리)
- 요청/응답 객체 생성 : 클라이언트로 부터 HTTP 요청이 들어오면, `HttpServletRequest`와 `HttpServletResponse` 객체를 생성하여 서블릿에 전달한다.
- 서블릿 호출 : 요청 URL에 매핑된 서블릿을 찾아 `doGet()`, `doPost()`등 해당 HTTP 메서드에 맞는 서블릿 메서드를 호출한다.
- 멀티쓰레딩 관리 : 여러 클라이언트 요청이 동시에 들어온 경우, 각 요청을 처리할 쓰레드를 생성하고 관리한다.
- 결과 전송 : 서블릿이 처리한 결과를 웹 서버를 통해 클라이언트에서 HTTP 응답으로 전달한다.

이것을 추상화라고 할 수 있는데, 개발자는 서블릿 코드만 작성하면 되고, Low level의 네트워크 통신, 쓰레드 관리, 요청/응답 파싱 등 복잡한 작업은 서블릿 컨테이너가 알아서 처리해준다.

#### JSP
jsp는 HTML에서 java 코드를 사용할 수 있게 만든 파일이다.

이것이 등장하는 이유는, 초창기에는 비즈니스 로직에 맞춰 구해진 결과를 서블릿에서 문자열을 통해서 HTML로 만들어서 리턴해 주었다. 그러나 이는 HTML 구조를 자바코드에서 구현해 복잡하고, 웹 디자이너와 협업이 어렵다는 단점이 있었다.

따라서 JSP는 HTML, XML 또는 다른 마크업 언어 내부에 자바 코드를 삽입하여 동적인 웹 콘텐츠를 생성할 수 있도록 해주는 서버 사이드 스크립팅 기술이라고 할 수 있다. 
서블릿에서 HTML을 작성하지 않고 결과를 전달만 해 주면, HTML에서 간단한 코드로 값을 전달 받고 동적으로 출력해 줄 수 있게 된다.

MVC 패턴으로 보면, JSP는 클라이언트에게 보여질 웹 페이지를 동적으로 생성하는 뷰어의 역할을 담당한다.

### MVC 패턴으로 보기

현대의 자바 웹 개발에서는 `MVC(Model-View-Controller)` 패턴을 따르는 것이 일반적이다.

> 추가 질문 사항
>
> 왜 MVC패턴을 사용하는 것이 일반적일까?

MVC 패턴에서 위의 개념들을 정리해 보면 다음과 같다.

- **Controller (서블릿):** 클라이언트의 요청을 받고 처리하며, 비즈니스 로직을 호출하고, 어떤 뷰(JSP)를 보여줄지 결정합니다.
- **View (JSP):** 컨트롤러(서블릿)로부터 전달받은 데이터를 이용하여 최종 사용자에게 보여줄 화면(HTML)을 생성합니다. (HTML과 자바 코드를 혼합)
- **Model (일반 자바 클래스/DB):** 비즈니스 로직과 데이터를 처리하고 관리합니다.





## 3. 문제 해결 경험 (학습과정에서 직면했던 문제와 에러, 이를 어떻게 해결했는가)

## 4. 참고 코드 / 예시

## 5. 참고자료 / 링크

## 6. 느낀 점 / 회고 